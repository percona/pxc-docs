



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="This feature is considered tech preview quality.">
      
      
        <meta name="author" content="Percona LLC">
      
      
        <link rel="canonical" href="https://docs.percona.com/percona-xtradb-cluster/5.7/management/data_at_rest_encryption.html">
      
      
        <link rel="prev" href="../manual/performance_schema_instrumentation.html">
      
      
        <link rel="next" href="configure-timeoutstartsec.html">
      
      
      <link rel="icon" href="../_static/percona-favicon.ico">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.13">
    
    
      
        <title>Data at Rest Encryption - Percona XtraDB Cluster</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Poppins";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://unicons.iconscout.com/release/v3.0.3/css/line.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
    
      <link rel="stylesheet" href="../css/percona.css">
    
      <link rel="stylesheet" href="../css/nocopy.css">
    
      <link rel="stylesheet" href="../css/osano.css">
    
      <link rel="stylesheet" href="../css/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-J4J70BNH0G"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-J4J70BNH0G",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-J4J70BNH0G",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
              
              
              
              
              
              <meta property="og:type" content="website" />
              <meta property="og:title" content="Percona XtraDB Cluster - Data at Rest Encryption" />
              <meta property="og:image" content="https://docs.percona.com/percona-xtradb-cluster/5.7/_static/percona-mysql-logo.png">
              <meta property="og:url" content="https://docs.percona.com/percona-xtradb-cluster/5.7/">
              
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="percona-light" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#data-at-rest-encryption" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
          <aside class="md-banner md-banner--warning">
            <div class="md-banner__inner md-grid md-typeset">
              
              <div><strong>Starting November 2023, MySQL 5.7 has reached EOL status.</strong></p></div>
              <div>Do you need help upgrading to MySQL 8.0? Do you need to stay on MySQL 5.7 a bit longer? We will support you either way. <a href="https://www.percona.com/navigating-mysql-5-7-end-of-life"> <strong> Learn more </strong></a></div> 
              
            </div>
            <script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script>
          </aside>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://docs.percona.com" title="Percona XtraDB Cluster" class="md-header__button md-logo" aria-label="Percona XtraDB Cluster" data-md-component="logo">
      
  <img src="../_static/percona-logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Percona XtraDB Cluster
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Data at Rest Encryption
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="percona-light" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/percona/pxc-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    percona/pxc-docs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
              
                
                <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                  <div class="md-sidebar__scrollwrap">
                    <div class="md-sidebar__inner">
                      



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://docs.percona.com" title="Percona XtraDB Cluster" class="md-nav__button md-logo" aria-label="Percona XtraDB Cluster" data-md-component="logo">
      
  <img src="../_static/percona-logo.svg" alt="logo">

    </a>
    Percona XtraDB Cluster
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/percona/pxc-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    percona/pxc-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Release notes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Release notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/release-notes_index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7 Release notes index
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/5.7.44-31.65.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.44-31.65 (2023-12-26)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/5.7.43-31.65.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.43-31.65 (2023-08-31)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/5.7.42-31.65.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.42-31.65 (2023-06-08)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/5.7.41-31.65.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.41-31.65 (2023-04-05)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/5.7.40-31.63.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.40-31.63 (2022-12-29)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/5.7.39-31.61.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.39-31.61 (2022-08-29)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/5.7.38-31.59.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.38-31.59 (2022-06-29)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.37-31.57.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.37-31.57 (2022-05-18)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.36-31.55.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.36-31.55
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.35-31.53.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.35-31.53
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.34-31.51.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.34-31.51
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.33-31.49.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.33-31.49
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.32-31.47.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.32-31.47
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.31-31.45.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.31-31.45
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.31-31.45.2.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.31-31.45.2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.31-31-45.3.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.31-31.45.3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.30-31.43.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.30-31.43
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.29-31.43.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.29-31.43
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.28-31.41.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.28-31.41
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.28-31.41.2.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.28-31.41.2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.27-31.39.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.27-31.39
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.26-31.37.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.26-31.37
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.25-31.35.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.25-31.35
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.24-31.33.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.24-31.33
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.23-31.31.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.23-31.31
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.23-31.31.2.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.23-31.31.2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.22-29.26.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.22-29.26
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.21-29.26.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.21-29.26
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.20-29.24.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.20-29.24
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.19-29.22.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.19-29.22
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.19-29.22-3.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.19-29.22-3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.18-29.20.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.18-29.20
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.17-29.20.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.17-29.20
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.17-27.20.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.17-27.20
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.16-27.19.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.16-27.19
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.14-26.17.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.14-26.17
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.12-5rc1-26.16.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.12-5rc1-26.16
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-5.7.11-4beta-25.14.2.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7.11-4beta-25.14.2
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Introduction
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../intro.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About Percona XtraDB Cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../limitation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster Limitations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../xtradb-cluster-version-numbers.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster 5.7 version numbers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../telemetry.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Telemetry on Percona XtraDB Cluster
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../overview.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quick Start Guide for Percona XtraDB Cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../install/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installing Percona XtraDB Cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configure.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring Nodes for Write-Set Replication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../bootstrap.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bootstrapping the First Node
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../add-node.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Adding Nodes to Cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../verify.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Verifying Replication
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Features
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../features/highavailability.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    High Availability
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../features/multimaster-replication.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multi-Source Replication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../features/pxc-strict-mode.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PXC Strict Mode
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    PXC Security
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            PXC Security
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Security Basics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/secure-network.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Securing the Network
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../security/encrypt-traffic.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Encrypting PXC Traffic
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User's Manual
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            User's Manual
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manual/state_snapshot_transfer.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    State Snapshot Transfer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manual/xtrabackup_sst.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraBackup SST Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manual/restarting_nodes.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Restarting the cluster nodes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manual/failover.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cluster Failover
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manual/monitoring.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitoring the cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manual/certification.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Certification in Percona XtraDB Cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manual/threading_model.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Percona XtraDB Cluster threading model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manual/gcache_record-set_cache_difference.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Understanding GCache and Record-Set Cache
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manual/performance_schema_instrumentation.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Perfomance Schema Instrumentation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Data at Rest Encryption
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="data_at_rest_encryption.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Data at Rest Encryption
  </span>
  

      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#about-the-keyring_file" class="md-nav__link">
    <span class="md-ellipsis">
      About the keyring_file
    </span>
  </a>
  
    <nav class="md-nav" aria-label="About the keyring_file">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      Compatibility
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-pxc-to-use-keyring_vault-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring PXC to use keyring_vault plugin
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuring PXC to use keyring_vault plugin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#keyring_vault" class="md-nav__link">
    <span class="md-ellipsis">
      keyring_vault
    </span>
  </a>
  
    <nav class="md-nav" aria-label="keyring_vault">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration_1" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mixing-keyring-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      Mixing keyring plugins
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Mixing keyring plugins">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#upgrade-and-compatibility-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrade and compatibility issues
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#innodb-tablespace-encryption" class="md-nav__link">
    <span class="md-ellipsis">
      InnoDB tablespace encryption
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#temporary-file-encryption" class="md-nav__link">
    <span class="md-ellipsis">
      Temporary file encryption
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migrating-keys-between-keyring-keystores" class="md-nav__link">
    <span class="md-ellipsis">
      Migrating Keys Between Keyring Keystores
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Migrating Keys Between Keyring Keystores">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#offline-migration" class="md-nav__link">
    <span class="md-ellipsis">
      Offline Migration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#online-migration" class="md-nav__link">
    <span class="md-ellipsis">
      Online Migration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migration-server-options" class="md-nav__link">
    <span class="md-ellipsis">
      Migration server options
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="configure-timeoutstartsec.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configure Systemd TimeoutStartSec
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Flexibility
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Flexibility
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../flexibility/binlogging_replication_improvements.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Binlogging and replication improvements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../flexibility/innodb_fts_improvements.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    InnoDB Full-Text Search improvements
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../performance/aio_page_requests.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multiple page asynchronous I/O requests
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Diagnostics
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Diagnostics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../diagnostics/innodb_fragmentation_count.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    InnoDB Page Fragmentation Counters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../diagnostics/libcoredumper.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using libcoredumper
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../diagnostics/stacktrace.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Stack Trace
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    How-tos
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            How-tos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../howtos/upgrade_guide.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Upgrading Percona XtraDB Cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../howtos/crash-recovery.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Crash Recovery
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../howtos/centos_howto.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring Percona XtraDB Cluster on CentOS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../howtos/ubuntu_howto.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuring Percona XtraDB Cluster on Ubuntu
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../howtos/garbd_howto.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setting up Galera Arbitrator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../howtos/singlebox.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to set up a three-node cluster on a single box
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../howtos/3nodesec2.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to set up a three-node cluster in EC2 environment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../howtos/haproxy.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Load balancing with HAProxy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../howtos/proxysql.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Load balancing with ProxySQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../howtos/virt_sandbox.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setting up PXC reference architecture with HAProxy
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    References
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            References
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../wsrep-status-index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Index of wsrep status variables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../wsrep-system-index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Index of wsrep system variables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../wsrep-provider-index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Index of wsrep_provider options
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../wsrep-files-index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Index of files created by PXC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Frequently Asked Questions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../glossary.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Glossary
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../copyright-and-licensing-information.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Copyright and licensing information
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../trademark-policy.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Trademark policy
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                      <br>
                      <label class="md-nav__title" for="__drawer">
                 <a href="https://learn.percona.com/download-percona-xtradb-cluster-5-7-manual" onclick="_gaq.push(['b._trackEvent', 'Percona XtraDB Cluster', 'Download', 'Download Manual Percona XtraDB Cluster']);" class="md-nav__link md-nav__link--active">
                   Download PDF
                 </a>
    </label> 
                    </div>
                  </div>
                </div>
              
              
                
                <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                  <div class="md-sidebar__scrollwrap">
                    <div class="md-sidebar__inner">
                      

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#about-the-keyring_file" class="md-nav__link">
    <span class="md-ellipsis">
      About the keyring_file
    </span>
  </a>
  
    <nav class="md-nav" aria-label="About the keyring_file">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      Usage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#compatibility" class="md-nav__link">
    <span class="md-ellipsis">
      Compatibility
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-pxc-to-use-keyring_vault-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring PXC to use keyring_vault plugin
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuring PXC to use keyring_vault plugin">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#keyring_vault" class="md-nav__link">
    <span class="md-ellipsis">
      keyring_vault
    </span>
  </a>
  
    <nav class="md-nav" aria-label="keyring_vault">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration_1" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#mixing-keyring-plugins" class="md-nav__link">
    <span class="md-ellipsis">
      Mixing keyring plugins
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Mixing keyring plugins">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#upgrade-and-compatibility-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrade and compatibility issues
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#innodb-tablespace-encryption" class="md-nav__link">
    <span class="md-ellipsis">
      InnoDB tablespace encryption
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#temporary-file-encryption" class="md-nav__link">
    <span class="md-ellipsis">
      Temporary file encryption
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migrating-keys-between-keyring-keystores" class="md-nav__link">
    <span class="md-ellipsis">
      Migrating Keys Between Keyring Keystores
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Migrating Keys Between Keyring Keystores">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#offline-migration" class="md-nav__link">
    <span class="md-ellipsis">
      Offline Migration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#online-migration" class="md-nav__link">
    <span class="md-ellipsis">
      Online Migration
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#migration-server-options" class="md-nav__link">
    <span class="md-ellipsis">
      Migration server options
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                    </div>
                  </div>
                </div>
              
            
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/percona/pxc-docs/edit/5.7/docs/management/data_at_rest_encryption.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/percona/pxc-docs/raw/5.7/docs/management/data_at_rest_encryption.md" title="View source of this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


<h1 id="data-at-rest-encryption">Data at Rest Encryption<a class="headerlink" href="#data-at-rest-encryption" title="Permanent link">&para;</a></h1>
<p>This feature is considered <strong>tech preview</strong> quality.</p>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>The “Data-at-rest” enables data at rest encryption of the InnoDB
(file-per-table) tablespace by encrypting the physical database files.
The data is automatically encrypted prior to writing to storage and
automatically decrypted when read. If unauthorized users access the data files,
they cannot read the contents.
Data-in-transit can be encrypted using an SSL connection (details are available in
the <a href="https://www.percona.com/doc/percona-xtradb-cluster/5.7/security/encrypt-traffic.html">encrypt traffic documentation</a>).
Data-at-rest encryption is supported in Percona XtraDB Cluster for
file-per-table tablespace and temporary files.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Percona Server for MySQL 5.7 data at rest encryption is similar to
the <a href="https://dev.mysql.com/doc/refman/5.7/en/innodb-data-encryption.html">MySQL 5.7 data-at-rest encryption</a>.
First, review the available encryption features for <a href="https://www.percona.com/doc/percona-server/5.7/security/data-at-rest-encryption.html">Percona Server for
MySQL 5.7</a>.
Percona Server for MySQL 8.0 provides encryption features and options not available in the 5.7 version.</p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Status</th>
<th>GA Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>keyring_plugin</td>
<td>Generally Available, supported</td>
<td><code>5.7.21-21</code></td>
</tr>
<tr>
<td>File-Per_Table Tablespace</td>
<td>Generally Available, supported</td>
<td><code>5.7.21-21</code></td>
</tr>
<tr>
<td>Temporary Files</td>
<td>Generally Available, supported</td>
<td><code>5.7.22-22</code></td>
</tr>
</tbody>
</table>
</div>
<h3 id="about-the-keyring_file">About the keyring_file<a class="headerlink" href="#about-the-keyring_file" title="Permanent link">&para;</a></h3>
<p>The <code>keyring_file</code> stores an encryption key in a physical file. Specify
the location of the file with the <code>keyring_file_data</code> parameter during startup. The following subsections cover
some of the essential procedures for the <code>keyring_file</code> plugin.</p>
<h4 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h4>
<p>Percona XtraDB Cluster inherits the Percona Server for MySQL behavior to
configure the <code>keyring_file</code> plugin. <a href="https://dev.mysql.com/doc/refman/5.7/en/install-plugin.html">Install the plugin</a> and add the following options in the configuration file:</p>
<div class="highlight"><pre><span></span><code>[mysqld]
early-plugin-load=keyring_file.so
keyring_file_data=&lt;PATH&gt;/keyring
</code></pre></div>
<p>The <code>keyring_file</code> must be loaded using the <code>--early-plugin-load</code> option.</p>
<p>A <code>SHOW PLUGINS</code> statement can be used to check if the plugin has been
successfully loaded.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>PXC recommends the same configuration on all cluster nodes, and all nodes should have the keyring configured. A JOINER node cannot join the cluster if there is a mismatch in the keyring configuration.</p>
</div>
<p>If the user has bootstrapped node with keyring enabled, then upcoming cluster nodes inherit the keyring (the encrypted key) from the DONOR node, in Percona XtraDB Cluster prior to 5.7.22, or generate the keyring, implemented in Percona XtraDB Cluster 5.7.22.</p>
<h4 id="usage">Usage<a class="headerlink" href="#usage" title="Permanent link">&para;</a></h4>
<p>The operations for a keyring are transactional. During write operations, the <code>keyring_file</code> plugin creates a backup file to ensure the operation can be rolled back if needed.</p>
<p>Prior to Percona XtraDB Cluster <code>5.7.22-29.26</code> the DONOR node had to send the
keyring to the JOINER,
because Percona XtraBackup backs up encrypted tablespaces. The JOINER must have
the encryption key used by the DONOR to encrypt the tables to read these encrypted
tablespaces. This restriction has
been relaxed in Percona XtraDB Cluster 5.7.22 and now Percona XtraBackup
re-encrypts the data using a
transition-key and the JOINER re-encrypts the table using a generated master-key.</p>
<p>A keyring is sent from the DONOR to the JOINER as part of SST process (prior to Percona XtraDB Cluster
5.7.22) or is generated on the JOINER.</p>
<p>The SST process can be done
using xtrabackup (the recommended way), mysqldump or the rsync tool. In <em>xtrabackup</em> case, the keyring is sent before the data backup/streaming
begins. The mysqldump utility uses a logical
backup so it does not need to send keyring. The rsync tool syncs the keys when the data directories are synced.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The rsync tool does not provide a secure channel. A keyring sent using the rsync SST could be vulnerable to attack.</p>
</div>
<p>The recommended SST process uses xtrabackup. The user can configure a secure channel and the keyring is fully secured. In fact, xtrabackup does not allow a user to send the keyring if the SST channel is not secured.</p>
<!-- warning Percona does not recommend rsync-based SST for data-at-rest
encryption using keyring. -->
<p>To maintain data consistency, Percona XtraDB Cluster does not allow a combination of nodes
with encryption and nodes without encryption. For
example, a user creates node-1 with encryption (keyring) enabled and node-2
with encryption (keyring) disabled. A table created with
encryption on node-1 fails on node-2, causing data inconsistency.</p>
<p>With Percona XtraDB Cluster <code>5.7.22-29.26</code>, a node will fail to start if it fails to load keyring plugin.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you do not specify the keyring parameters, the node does not know that it must load keyring. A JOINER node may start but eventually shutdown when a DML-level inconsistency with encrypted tablespace is detected.</p>
</div>
<p>If a node does not have an encrypted tablespace, the keyring is not generated and
the keyring file is empty. The keyring is generated only when node uses an
encrypted tablespace.</p>
<p>A user can rotate the key when needed. The <code>ALTER INSTANCE ROTATE INNODB MASTER KEY</code> statement is local to the node and is not replicated on
cluster.</p>
<p>Starting from Percona XtraDB Cluster 5.7.22, the JOINER generates its keyring. In Percona XtraDB Cluster before
5.7.22 when JOINER joined the cluster, its keyring was the same as DONOR’s keyring.
The user could rotate the key if different keys for each node is part
of the user’s requirements (internal rules). Using different keys for each
node is not necessary from the technical side, since all cluster nodes can
continue operating with the same MASTER-key.</p>
<h4 id="compatibility">Compatibility<a class="headerlink" href="#compatibility" title="Permanent link">&para;</a></h4>
<p>The keyring and the Percona XtraDB Cluster SST process is backward compatible.  A higher-version JOINER can join from lower-version DONOR, but not vice-versa.
More details are covered in the Upgrade and compatibility issues section.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Percona XtraDB Cluster 5.6 does not have encrypted tablespaces. No major upgrade scenario for data-at-rest encryption is possible.</p>
</div>
<h2 id="configuring-pxc-to-use-keyring_vault-plugin">Configuring PXC to use keyring_vault plugin<a class="headerlink" href="#configuring-pxc-to-use-keyring_vault-plugin" title="Permanent link">&para;</a></h2>
<h3 id="keyring_vault">keyring_vault<a class="headerlink" href="#keyring_vault" title="Permanent link">&para;</a></h3>
<p>The <code>keyring_vault</code> plugin is supported starting from PXC 5.7.22. This plugin
allows storing the master-key in vault-server.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The rsync tool does not support the <code>keyring_vault</code>. Any rysnc-SST on a joiner is aborted if the <code>keyring_vault</code> is configured.</p>
</div>
<h4 id="configuration_1">Configuration<a class="headerlink" href="#configuration_1" title="Permanent link">&para;</a></h4>
<p>Configuration options are the same as
<a href="https://www.percona.com/doc/percona-server/5.7/security/data-at-rest-encryption.html">upstream</a>.</p>
<p>The <code>my.cnf</code> configuration file should contain
the following options:</p>
<div class="highlight"><pre><span></span><code>[mysqld]
early-plugin-load=&quot;keyring_vault=keyring_vault.so&quot;
keyring_vault_config=&quot;&lt;PATH&gt;/keyring_vault_n1.conf&quot;
</code></pre></div>
<p>Also <code>keyring_vault_n1.conf</code> file contents should be :</p>
<div class="highlight"><pre><span></span><code>vault_url = http://127.0.0.1:8200
secret_mount_point = secret1
token = e0345eb4-35dd-3ddd-3b1e-e42bb9f2525d
vault_ca = /data/keyring_vault_confs/vault_ca.crt
</code></pre></div>
<p>The detailed description of these options can be found in the <a href="https://www.percona.com/doc/percona-server/5.7/security/data-at-rest-encryption.html">upstream documentation</a>.</p>
<p>Vault-server is an external server, so make sure a PXC node can reach the
server.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Percona XtraDB Cluster recommends using the same keyring_plugin on all cluster nodes. Mixing keyring plugins is recommended only while transitioning from <code>keyring_file</code> to <code>keyring_vault</code> or vice-versa.</p>
</div>
<p>All nodes do not need to refer to same vault server. Whatever
vault server is used, it should be accessible from the respective node. Also
there is no restriction for all nodes to use the same mount point.</p>
<p>If the node is not able to reach/connect to the vault server, an error is notified
during the server boot, and node refuses to start:</p>
<div class="highlight"><pre><span></span><code>2018-05-29T03:54:33.859613Z 0 [Warning] Plugin keyring_vault reported:
&#39;There is no vault_ca specified in keyring_vault&#39;s configuration file.
Please make sure that Vault&#39;s CA certificate is trusted by the machine
from which you intend to connect to Vault.&#39;
2018-05-29T03:54:33.977145Z 0 [ERROR] Plugin keyring_vault reported:
&#39;CURL returned this error code: 7 with error message : Failed to connect
to 127.0.0.1 port 8200: Connection refused&#39;
</code></pre></div>
<p>If some nodes of the cluster are unable to connect to vault-server, this
relates only to these specific nodes: e.g., if node-1 can connect, and
node-2 cannot connect, only node-2 refuses to start. Also, if the server has
pre-existing encrypted object and on reboot, the server fails to connect to
vault-server, the object is not accessible.</p>
<p>In case when vault-server is accessible but authentication credential is incorrect,
the consequences are the same, and the corresponding error looks like the following:</p>
<div class="highlight"><pre><span></span><code>2018-05-29T03:58:54.461911Z 0 [Warning] Plugin keyring_vault reported:
&#39;There is no vault_ca specified in keyring_vault&#39;s configuration file.
Please make sure that Vault&#39;s CA certificate is trusted by the machine
from which you intend to connect to Vault.&#39;
2018-05-29T03:58:54.577477Z 0 [ERROR] Plugin keyring_vault reported:
&#39;Could not retrieve list of keys from Vault. Vault has returned the
following error(s): [&quot;permission denied&quot;]&#39;
</code></pre></div>
<p>In case of an accessible vault-server with the wrong mount point, there is no
error during server boot, but the node still refuses to start:</p>
<div class="highlight"><pre><span></span><code><span class="n">mysql</span><span class="o">&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="p">(</span><span class="n">c1</span><span class="w"> </span><span class="nb">INT</span><span class="p">,</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="n">pk</span><span class="p">(</span><span class="n">c1</span><span class="p">))</span><span class="w"> </span><span class="n">ENCRYPTION</span><span class="o">=</span><span class="s1">&#39;Y&#39;</span><span class="p">;</span>
</code></pre></div>
<p>The example of the output is the following:</p>
<div class="highlight"><pre><span></span><code>ERROR 3185 (HY000): Can&#39;t find master key from keyring, please check keyring plugin is loaded.

2018-05-29T04:01:33.774684Z 5 [ERROR] Plugin keyring_vault reported:
&#39;Could not write key to Vault. Vault has returned the following error(s):
[&quot;no handler for route
&#39;secret1/NDhfSU5OT0RCS2V5LTkzNzVmZWQ0LTVjZTQtMTFlOC05YTc3LTM0MDI4NmI4ODhiZS0xMF8=&#39;&quot;]&#39;
2018-05-29T04:01:33.774786Z 5 [ERROR] Plugin keyring_vault reported:
&#39;Could not flush keys to keyring&#39;
</code></pre></div>
<h2 id="mixing-keyring-plugins">Mixing keyring plugins<a class="headerlink" href="#mixing-keyring-plugins" title="Permanent link">&para;</a></h2>
<p>With Percona XtraBackup introducing transition-key logic, it is now possible to
mix and match keyring plugins. For example, the user has node-1 configured to use
<code>keyring_file</code> plugin and node-2 configured to use <code>keyring_vault</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Percona recommends the same configuration for all the nodes of the cluster. A mix and match (in keyring plugins) is recommended only during transition from one type of keying to another.</p>
</div>
<h3 id="upgrade-and-compatibility-issues">Upgrade and compatibility issues<a class="headerlink" href="#upgrade-and-compatibility-issues" title="Permanent link">&para;</a></h3>
<p>Percona XtraDB Cluster server before <code>5.7.22</code> only supported the <code>keyring_file</code> and the
dependent Percona XtraBackup did not have the concept of transition-key. This makes the
mix and match of old Percona XtraDB Cluster server (pre-5.7.21) using <code>keyring_file</code> with new
Percona XtraDB Cluster server (post-5.7.22) using <code>keyring_vault</code> not possible. A user should
first upgrade Percona XtraDB Cluster server to version 5.7.22 or newer using <code>keyring_file</code>
plugin and then let it act as a DONOR to a new booting <code>keyring_vault</code> running the
JOINER.</p>
<p>If all the nodes use Percona XtraDB Cluster 5.7.22, then the user can configure
some nodes to use the <code>keyring_file</code> and other to use the
<code>keyring_vault</code>, but this setup is not recommended and should be used
during only during the transition to vault.</p>
<p>If all the nodes are using Percona XtraDB Cluster 5.7.21 and the user would like to use
<code>keyring_vault</code> plugin, all the nodes should be upgraded to use Percona XtraDB Cluster 5.7.22
(that is where vault plugin support was introduced in PXC) or newer. Once all nodes are
configured to use Percona XtraDB Cluster 5.7.22, users can switch one node to use
<code>vault-plugin</code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>MySQL 5.7.21 supports <a href="https://dev.mysql.com/doc/mysql-security-excerpt/5.7/en/keyring-key-migration.html">migration between keystores</a>. Migration requires a restart.</p>
</div>
<h2 id="innodb-tablespace-encryption">InnoDB tablespace encryption<a class="headerlink" href="#innodb-tablespace-encryption" title="Permanent link">&para;</a></h2>
<p>Percona XtraDB Cluster supports tablespace encryption for the file-per-table tablespace.
File-per-tablespace encryption is a table or tablespace-specific feature and
is enabled through DDL:</p>
<div class="highlight"><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">t1</span><span class="w"> </span><span class="p">(</span><span class="n">c1</span><span class="w"> </span><span class="nb">INT</span><span class="p">,</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="n">pk</span><span class="p">(</span><span class="n">c1</span><span class="p">))</span><span class="w"> </span><span class="n">ENCRYPTION</span><span class="o">=</span><span class="s1">&#39;Y&#39;</span><span class="p">;</span>
<span class="k">CREATE</span><span class="w"> </span><span class="n">TABLESPACE</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="n">DATAFILE</span><span class="w"> </span><span class="s1">&#39;foo.ibd&#39;</span><span class="w"> </span><span class="n">ENCRYPTION</span><span class="o">=</span><span class="s1">&#39;Y&#39;</span><span class="p">;</span>
</code></pre></div>
<p>The PXC cluster replicates the DDL statements and creates the encrypted table or
tablespace on all cluster nodes.</p>
<p>This feature requires a keyring plugin to be loaded before it can be used.
Percona XtraDB Cluster supports two types of keyring
plugin: <code>keyring_file</code> and <code>keyring_vault</code>.</p>
<h2 id="temporary-file-encryption">Temporary file encryption<a class="headerlink" href="#temporary-file-encryption" title="Permanent link">&para;</a></h2>
<p>Percona Server for MySQL 5.7.22 added support for encrypting temporary file storage
enabled using <code>encrypt-tmp-files</code>. This storage or files are local to the
node and has no direct effect on Percona XtraDB Cluster replication. Percona XtraDB Cluster recommends enabling
it on all the cluster nodes, though the action is not mandatory. The parameter
is the same as in Percona Server:</p>
<div class="highlight"><pre><span></span><code>[mysqld]
encrypt-tmp-files=ON
</code></pre></div>
<h2 id="migrating-keys-between-keyring-keystores">Migrating Keys Between Keyring Keystores<a class="headerlink" href="#migrating-keys-between-keyring-keystores" title="Permanent link">&para;</a></h2>
<p>Percona XtraDB Cluster supports key migration between keystores. The migration can be performed
offline or online.</p>
<h3 id="offline-migration">Offline Migration<a class="headerlink" href="#offline-migration" title="Permanent link">&para;</a></h3>
<p>In offline migration, the node to migrate is shutdown and the migration server
takes care of migrating keys for the said server to a new keystore.</p>
<p>Following example illustrates this scenario:</p>
<ol>
<li>
<p>Three Percona XtraDB Cluster nodes n1, n2, n3 - all using <code>keyring_file</code>, and n2 should be migrated to use <code>keyring_vault</code></p>
</li>
<li>
<p>The user shuts down n2 node.</p>
</li>
<li>
<p>The user starts the Migration Server (<code>mysqld</code> with a special option).</p>
</li>
<li>
<p>The Migration Server copies keys from n2 keyring file and adds them to the vault server.</p>
</li>
<li>
<p>The user starts n2 node with the vault parameter, and keys should be available.</p>
</li>
</ol>
<p>Here is how the migration server output should look like:</p>
<div class="highlight"><pre><span></span><code>/dev/shm/pxc57/bin/mysqld --defaults-file=/dev/shm/pxc57/copy_mig.cnf \
--keyring-migration-source=keyring_file.so \
--keyring_file_data=/dev/shm/pxc57/node2/keyring \
--keyring-migration-destination=keyring_vault.so \
--keyring_vault_config=/dev/shm/pxc57/vault/keyring_vault.cnf &amp;

2018-05-30T03:44:11.803459Z 0 [Warning] TIMESTAMP with implicit DEFAULT
value is deprecated. Please use
--explicit_defaults_for_timestamp server option (see documentation for
more details).
2018-05-30T03:44:11.803534Z 0 [Note] --secure-file-priv is set to NULL.
Operations related to importing and
exporting data are disabled
2018-05-30T03:44:11.803550Z 0 [Warning] WSREP: Node is not a cluster node.
Disabling pxc_strict_mode
2018-05-30T03:44:11.803564Z 0 [Note] /dev/shm/pxc57/bin/mysqld
(mysqld 5.7.21-21-29.26-debug) starting as process
5710 ...
2018-05-30T03:44:11.805917Z 0 [Warning] Can&#39;t create test file /dev/shm/pxc57/copy_mig/qaserver-06.lower-test
2018-05-30T03:44:11.805932Z 0 [Warning] Can&#39;t create test file /dev/shm/pxc57/copy_mig/qaserver-06.lower-test
2018-05-30T03:44:11.945989Z 0 [Note] Keyring migration successful.
2018-05-30T03:44:11.946015Z 0 [Note] Binlog end
2018-05-30T03:44:11.946047Z 0 [Note] Shutting down plugin &#39;keyring_vault&#39;
2018-05-30T03:44:11.946166Z 0 [Note] Shutting down plugin &#39;keyring_file&#39;
2018-05-30T03:44:11.947334Z 0 [Note] /dev/shm/pxc57/bin/mysqld: Shutdown complete
</code></pre></div>
<p>The destination keystore receives additional migrated keys
(pre-existing keys in destination keystore are not touched or removed) on successful
migration. The source
keystore continues to retain the keys as migration performs copy operation and
not move operation.</p>
<p>If the migration fails, then the destination keystore is left untouched.</p>
<h3 id="online-migration">Online Migration<a class="headerlink" href="#online-migration" title="Permanent link">&para;</a></h3>
<p>In online migration, node to migrate is kept running, and the migration server takes
care of migrating keys for the said server to a new keystore by connecting to
the node.</p>
<p>The following example illustrates this scenario:</p>
<ol>
<li>
<p>Three Percona XtraDB Cluster nodes n1, n2, n3 - all using <code>keyring_file</code>, and n3 should be migrated to use <code>keyring_vault</code></p>
</li>
<li>
<p>User starts the Migration Server (<code>mysqld</code> with a special option).</p>
</li>
<li>
<p>Migration Server copies keys from the n3 keyring file and adds them to the vault server.</p>
</li>
<li>
<p>The user restarts n3 node with the vault parameter, and keys should be available.</p>
</li>
</ol>
<p>Here is how the migration server output should look like:</p>
<div class="highlight"><pre><span></span><code>/dev/shm/pxc57/bin/mysqld --defaults-file=/dev/shm/pxc57/copy_mig.cnf \
--keyring-migration-source=keyring_vault.so \
--keyring_vault_config=/dev/shm/pxc57/keyring_vault3.cnf \
--keyring-migration-destination=keyring_file.so \
--keyring_file_data=/dev/shm/pxc57/node3/keyring \
--keyring-migration-host=localhost \
--keyring-migration-user=root \
--keyring-migration-port=16300 \
--keyring-migration-password=&#39;&#39; &amp;

2018-05-29T14:07:32.789673Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use
--explicit_defaults_for_timestamp server option (see documentation for more details).
2018-05-29T14:07:32.789748Z 0 [Note] --secure-file-priv is set to NULL. Operations related to importing and
exporting data are disabled
2018-05-29T14:07:32.789766Z 0 [Warning] WSREP: Node is not a cluster node. Disabling pxc_strict_mode
2018-05-29T14:07:32.789780Z 0 [Note] /dev/shm/pxc57/bin/mysqld (mysqld 5.7.21-21-29.26-debug) starting as process
4936 ...
2018-05-29T14:07:32.792036Z 0 [Warning] Can&#39;t create test file /dev/shm/pxc57/copy_mig/qaserver-06.lower-test
2018-05-29T14:07:32.792052Z 0 [Warning] Can&#39;t create test file /dev/shm/pxc57/copy_mig/qaserver-06.lower-test
2018-05-29T14:07:32.927612Z 0 [Note] Keyring migration successful.
2018-05-29T14:07:32.927636Z 0 [Note] Binlog end
2018-05-29T14:07:32.927671Z 0 [Note] Shutting down plugin &#39;keyring_vault&#39;
2018-05-29T14:07:32.927793Z 0 [Note] Shutting down plugin &#39;keyring_file&#39;
2018-05-29T14:07:32.928864Z 0 [Note] /dev/shm/pxc57/bin/mysqld: Shutdown complete
</code></pre></div>
<p>On a successful migration, the destination keystore has the additional migrated keys
(the pre-existing keys in the destination keystore are not touched or removed).
The source
keystore continues to retain the keys as the migration performs copy operation and
not move operation.</p>
<p>If the migration fails, then the destination keystore is left untouched.</p>
<h3 id="migration-server-options">Migration server options<a class="headerlink" href="#migration-server-options" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p><code>--keyring-migration-source</code>: The source keyring plugin that manages the
keys to be migrated.</p>
</li>
<li>
<p><code>--keyring-migration-destination</code>: The destination keyring plugin to which
the migrated keys are to be copied</p>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For offline migration, no additional key migration options are needed.</p>
</div>
<ul>
<li>
<p><code>--keyring-migration-host</code>: The host where the running server is located. This host is always the local host.</p>
</li>
<li>
<p><code>--keyring-migration-user</code>, <code>--keyring-migration-password</code>: The username and password for the account used to connect to the running server.</p>
</li>
<li>
<p><code>--keyring-migration-port</code>: Used for TCP/IP connections, the running server’s port number used to connect.</p>
</li>
<li>
<p><code>--keyring-migration-socket</code>: Used for Unix socket file or Windows named pipe connections, the running server socket or named pipe used to connect.</p>
</li>
</ul>
<p>Prerequisite for migration:</p>
<p>Make sure to pass required keyring options and other configuration parameters
for the two keyring plugins. For example, if <code>keyring_file</code> is one of the
plugins, you must set the <code>keyring_file_data</code> system variable if the
keyring data file location is not the default location.</p>
<p>Other non-keyring options may be required as well. One way to specify these
options is by using <code>--defaults-file</code> to name an option file that contains
the required options.</p>
<div class="highlight"><pre><span></span><code>[mysqld]
basedir=/dev/shm/pxc57
datadir=/dev/shm/pxc57/copy_mig
log-error=/dev/shm/pxc57/logs/copy_mig.err
socket=/tmp/copy_mig.sock
port=16400
</code></pre></div>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    2022-07-20
  </span>

    
    
    
    
  </aside>


  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
    <div class="md-copyright__highlight">
 <a href='https://percona.com' target='_blank'>Percona LLC and/or its affiliates, </a> &copy; 2024
 <a href="#" onclick="Osano.cm.showDrawer('osano-cm-dom-info-dialog-open')">Cookie Preferences</a>    
</div>
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["search.highlight", "navigation.top", "content.tabs.link", "content.action.edit", "content.action.view", "content.code.copy"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
<script src="https://cmp.osano.com/Azqe5vTyLOSbN3OuT/49ad85b5-0418-4794-ab81-7599dddd534c/osano.js"></script>

      <script src="../assets/javascripts/bundle.c8d2eff1.min.js"></script>
      
        <script src="../js/version-select.js"></script>
      
        <script src="../js/promptremover.js"></script>
      
    

  </body>
</html>