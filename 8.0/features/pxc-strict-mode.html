



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation">
      
      
        <meta name="author" content="Percona LLC">
      
      
        <link rel="canonical" href="https://docs.percona.com/percona-xtradb-cluster-docs/8.0/8.0/features/pxc-strict-mode.html">
      
      
        <link rel="prev" href="highavailability.html">
      
      
        <link rel="next" href="online-schema-upgrade.html">
      
      <link rel="icon" href="../_static/percona-favicon.ico">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.2">
    
    
      
        <title>PXC strict mode - Percona XtraDB Cluster</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7bf56d0a.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Poppins";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://unicons.iconscout.com/release/v3.0.3/css/line.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
    
      <link rel="stylesheet" href="../css/percona.css">
    
      <link rel="stylesheet" href="../css/nocopy.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-343802-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");ga("send","event","feedback","click",t,e),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){ga("send","pageview",e.pathname)})});var e=document.createElement("script");e.async=!0,e.src="https://www.google-analytics.com/analytics.js",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>var consent;"undefined"==typeof __md_analytics||(consent=__md_get("__consent"))&&consent.analytics&&__md_analytics()</script>
  

    
    
    
              

              <script>
              (function (w, d, s, l, i) {
                  w[l] = w[l] || []; w[l].push({
                    'gtm.start': new Date().getTime(), 
                    event: 'gtm.js'
                  });
                  var f = d.getElementsByTagName(s)[0],
                  j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
                  j.async = true; 
                  j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
                  f.parentNode.insertBefore(j, f);
                })(window, document, 'script', 'dataLayer', 'GTM-K48FGP2');
              </script>
              
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="percona-light" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#pxc-strict-mode" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://docs.percona.com" title="Percona XtraDB Cluster" class="md-header__button md-logo" aria-label="Percona XtraDB Cluster" data-md-component="logo">
      
  <img src="../_static/percona-logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Percona XtraDB Cluster
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              PXC strict mode
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="percona-light" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/percona/pxc-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    percona/pxc-docs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://docs.percona.com" title="Percona XtraDB Cluster" class="md-nav__button md-logo" aria-label="Percona XtraDB Cluster" data-md-component="logo">
      
  <img src="../_static/percona-logo.svg" alt="logo">

    </a>
    Percona XtraDB Cluster
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/percona/pxc-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.3.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    percona/pxc-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
          Introduction
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Introduction
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../intro.html" class="md-nav__link">
        About Percona XtraDB Cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../limitation.html" class="md-nav__link">
        Percona XtraDB Cluster limitations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../xtradb-cluster-version-numbers.html" class="md-nav__link">
        Understand version numbers
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
          Get started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Get started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../overview.html" class="md-nav__link">
        Quick start guide for Percona XtraDB Cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../install/index.html" class="md-nav__link">
        Install Percona XtraDB Cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../configure.html" class="md-nav__link">
        Configure nodes for write-set replication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../bootstrap.html" class="md-nav__link">
        Bootstrap the first node
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../add-node.html" class="md-nav__link">
        Add nodes to cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../verify.html" class="md-nav__link">
        Verify replication
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          Features
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Features
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="highavailability.html" class="md-nav__link">
        High availability
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          PXC strict mode
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="pxc-strict-mode.html" class="md-nav__link md-nav__link--active">
        PXC strict mode
      </a>
      
        

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#validations" class="md-nav__link">
    Validations
  </a>
  
    <nav class="md-nav" aria-label="Validations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#group-replication" class="md-nav__link">
    Group replication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage-engine" class="md-nav__link">
    Storage engine
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#myisam-replication" class="md-nav__link">
    MyISAM replication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binary-log-format" class="md-nav__link">
    Binary log format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tables-without-primary-keys" class="md-nav__link">
    Tables without primary keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log-output" class="md-nav__link">
    Log output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explicit-table-locking" class="md-nav__link">
    Explicit table locking
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auto-increment-lock-mode" class="md-nav__link">
    Auto-increment lock mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combine-schema-and-data-changes-in-a-single-statement" class="md-nav__link">
    Combine schema and data changes in a single statement
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discard-and-import-tablespaces" class="md-nav__link">
    Discard and import tablespaces
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#major-version-check" class="md-nav__link">
    Major version check
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="online-schema-upgrade.html" class="md-nav__link">
        Online schema upgrade
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nbo.html" class="md-nav__link">
        Non-Blocking Operations (NBO) method for Online Scheme Upgrades (OSU)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          PXC security
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          PXC security
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../security/index.html" class="md-nav__link">
        Security basics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../security/secure-network.html" class="md-nav__link">
        Secure the network
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../security/encrypt-traffic.html" class="md-nav__link">
        Encrypt PXC traffic
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../security/apparmor.html" class="md-nav__link">
        Enable AppArmor
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../security/selinux.html" class="md-nav__link">
        Enable SELinux
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          User's manual
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          User's manual
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../manual/state_snapshot_transfer.html" class="md-nav__link">
        State snapshot transfer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../manual/xtrabackup_sst.html" class="md-nav__link">
        Percona XtraBackup SST configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../manual/restarting_nodes.html" class="md-nav__link">
        Restart the cluster nodes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../manual/failover.html" class="md-nav__link">
        Cluster failover
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../manual/monitoring.html" class="md-nav__link">
        Monitor the cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../manual/certification.html" class="md-nav__link">
        Certification in Percona XtraDB Cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../manual/threading_model.html" class="md-nav__link">
        Percona XtraDB Cluster threading model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../manual/gcache_record-set_cache_difference.html" class="md-nav__link">
        Understand GCache and Record-Set cache
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../management/gcache-write-set-cache-encryption.html" class="md-nav__link">
        GCache encryption and Write-Set cache encryption
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../manual/performance_schema_instrumentation.html" class="md-nav__link">
        Perfomance Schema instrumentation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../management/data_at_rest_encryption.html" class="md-nav__link">
        Data at Rest Encryption
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          How-tos
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          How-tos
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../howtos/upgrade_guide.html" class="md-nav__link">
        Upgrade Percona XtraDB Cluster
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../howtos/crash-recovery.html" class="md-nav__link">
        Crash recovery
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../howtos/centos_howto.html" class="md-nav__link">
        Configure Percona XtraDB Cluster on CentOS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../howtos/ubuntu_howto.html" class="md-nav__link">
        Configure Percona XtraDB Cluster on Ubuntu
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../howtos/garbd_howto.html" class="md-nav__link">
        Set up Galera arbitrator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../howtos/singlebox.html" class="md-nav__link">
        How to set up a three-node cluster on a single box
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../howtos/3nodesec2.html" class="md-nav__link">
        How to set up a three-node cluster in EC2 environment
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../howtos/haproxy.html" class="md-nav__link">
        Load balancing with HAProxy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../howtos/proxysql.html" class="md-nav__link">
        Load balancing with ProxySQL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../howtos/proxysql-v2.html" class="md-nav__link">
        ProxySQL admin utilities
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../howtos/virt_sandbox.html" class="md-nav__link">
        Setting up a testing environment with ProxySQL
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
      
      
      
        <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
          Release notes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Release notes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/release-notes_index.html" class="md-nav__link">
        Release notes index
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/8.0.31-23.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.31-23 (2023-03-14)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/8.0.30-22.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.30-22.md (2022-12-28)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/8.0.29-21.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.29-21 (2022-09-12)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.28-19.1.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.28-19.1 (2022-07-19)
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.27-18.1.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.27-18.1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.26-16.1.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.26-16.1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.25-15.1.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.25-15.1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.23-14.1.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.23-14.1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.22-13.1.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.22-13.1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.21-12.1.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.21-12.1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.20-11.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.20-11
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.20-11.3.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.20-11.3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.20-11.2.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.20-11.2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.19-10.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.19-10
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/Percona-XtraDB-Cluster-8.0.18-9.3.html" class="md-nav__link">
        Percona XtraDB Cluster 8.0.18-9.3
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
      
      
      
        <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
          References
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          References
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wsrep-status-index.html" class="md-nav__link">
        Index of wsrep status variables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wsrep-system-index.html" class="md-nav__link">
        Index of wsrep system variables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wsrep-provider-index.html" class="md-nav__link">
        Index of wsrep_provider options
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wsrep-files-index.html" class="md-nav__link">
        Index of files created by PXC
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../faq.html" class="md-nav__link">
        Frequently asked questions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../glossary.html" class="md-nav__link">
        Glossary
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../copyright-and-licensing-information.html" class="md-nav__link">
        Copyright and licensing information
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../trademark-policy.html" class="md-nav__link">
        Trademark policy
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
    <br/>
   <label class="md-nav__title" for="__drawer">
    <a href="https://learn.percona.com/download-percona-xtradb-cluster-8-manual" onclick="_gaq.push(['b._trackEvent', 'Percona XtraBackup', 'Download', 'Download Manual Percona XtraBackup']);" class="md-nav__link md-nav__link--active">
      Download PDF
    </a>
  </label> 
  </ul>
</nav>

                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary" aria-label="On this page">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      On this page
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#validations" class="md-nav__link">
    Validations
  </a>
  
    <nav class="md-nav" aria-label="Validations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#group-replication" class="md-nav__link">
    Group replication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage-engine" class="md-nav__link">
    Storage engine
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#myisam-replication" class="md-nav__link">
    MyISAM replication
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#binary-log-format" class="md-nav__link">
    Binary log format
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tables-without-primary-keys" class="md-nav__link">
    Tables without primary keys
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log-output" class="md-nav__link">
    Log output
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explicit-table-locking" class="md-nav__link">
    Explicit table locking
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auto-increment-lock-mode" class="md-nav__link">
    Auto-increment lock mode
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#combine-schema-and-data-changes-in-a-single-statement" class="md-nav__link">
    Combine schema and data changes in a single statement
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#discard-and-import-tablespaces" class="md-nav__link">
    Discard and import tablespaces
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#major-version-check" class="md-nav__link">
    Major version check
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                

                <!-- Edit and view button -->
                
                  
                  
                  <a
                    href="https://github.com/percona/pxc-docs/edit/8.0/docs/features/pxc-strict-mode.md"
                    title=""
                    class="md-content__button md-icon"
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
                  </a>
                  <a
                    href="https://raw.githubusercontent.com/percona/pxc-docs/8.0/docs/features/pxc-strict-mode.md"
                    title="View source of this page"
                    class="md-content__button md-icon"
                  >
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
                  </a>
                

                <!--
                  Hack: check whether the content contains a h1 headline. If it
                  doesn't, the page title (or respectively site name) is used
                  as the main headline.
                -->
                

                <!-- Markdown content -->
                <h1 id="pxc-strict-mode">PXC strict mode<a class="headerlink" href="#pxc-strict-mode" title="Permanent link">&para;</a></h1>
<p>PXC Strict Mode is designed to avoid the use of
tech preview features and unsupported features in Percona XtraDB Cluster.
It performs a number of validations at startup and during runtime.</p>
<p>Depending on the actual mode you select,
upon encountering a failed validation,
the server will either throw an error
(halting startup or denying the operation),
or log a warning and continue running as normal.
The following modes are available:</p>
<ul>
<li>
<p><code>DISABLED</code>: Do not perform strict mode validations
and run as normal.</p>
</li>
<li>
<p><code>PERMISSIVE</code>: If a vaidation fails, log a warning and continue running
as normal.</p>
</li>
<li>
<p><code>ENFORCING</code>: If a validation fails during startup,
halt the server and throw an error.
If a validation fails during runtime,
deny the operation and throw an error.</p>
</li>
<li>
<p><code>MASTER</code>: The same as <code>ENFORCING</code> except that the validation of
<a href="#explicit-table-locking">explicit table locking</a> is not performed.
This mode can be used with clusters
in which write operations are isolated to a single node.</p>
</li>
</ul>
<p>By default, PXC Strict Mode is set to <code>ENFORCING</code>,
except if the node is acting as a standalone server
or the node is bootstrapping, then PXC Strict Mode defaults to <code>DISABLED</code>.</p>
<p>It is recommended to keep PXC Strict Mode set to <code>ENFORCING</code>,
because in this case whenever Percona XtraDB Cluster encounters a tech preview feature
or an unsupported operation, the server will deny it.
This will force you to re-evaluate your Percona XtraDB Cluster configuration
without risking the consistency of your data.</p>
<p>If you are planning to set PXC Strict Mode to anything else than <code>ENFORCING</code>,
you should be aware of the limitations and effects
that this may have on data integrity.
For more information, see <a href="#validations">Validations</a>.</p>
<p>To set the mode, use the <a href="../wsrep-system-index.html#pxc_strict_mode"><code>pxc_strict_mode</code></a> variable in the configuration file
or the <code>--pxc-strict-mode</code> option during <code>mysqld</code> startup.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is better to start the server with the necessary mode
(the default <code>ENFORCING</code> is highly recommended).
However, you can dynamically change it during runtime.
For example, to set PXC Strict Mode to <code>PERMISSIVE</code>,
run the following command:</p>
<div class="highlight" data-prompt="mysql>"><pre><span></span><code>mysql&gt;<span class="w"> </span>SET<span class="w"> </span>GLOBAL<span class="w"> </span><span class="nv">pxc_strict_mode</span><span class="o">=</span>PERMISSIVE<span class="p">;</span>
</code></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To further ensure data consistency,
it is important to have all nodes in the cluster
running with the same configuration,
including the value of <a href="../wsrep-system-index.html#pxc_strict_mode"><code>pxc_strict_mode</code></a> variable.</p>
</div>
<h2 id="validations">Validations<a class="headerlink" href="#validations" title="Permanent link">&para;</a></h2>
<p>PXC Strict Mode validations are designed to ensure optimal operation
for common cluster setups that do not require tech preview features
and do not rely on operations not supported by Percona XtraDB Cluster.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If an unsupported operation is performed on a node with <a href="../wsrep-system-index.html#pxc_strict_mode"><code>pxc_strict_mode</code></a> set to <code>DISABLED</code> or <code>PERMISSIVE</code>, it will not be validated on nodes where it is replicated to, even if the destination node has <a href="../wsrep-system-index.html#pxc_strict_mode"><code>pxc_strict_mode</code></a> set to <code>ENFORCING</code>.</p>
</div>
<p>This section describes the purpose and consequences of each validation.</p>
<h3 id="group-replication">Group replication<a class="headerlink" href="#group-replication" title="Permanent link">&para;</a></h3>
<!-- TODO:

Provide steps for migrating from group replication

describing why (e.g. it is a completely different
clustering product, and we only support migration from/to, not
actively running them together), and how (disabled - allowed,
permission - warnings, enforcing/master - can't be turned on) -->
<p><em>Group replication</em> is a feature of MySQL that <a href="https://dev.mysql.com/doc/refman/8.0/en/group-replication.html">provides distributed state
machine replication with strong coordination between servers</a>. It is
implemented as a plugin which, if activated, may conflict with PXC. Group
replication cannot be activated to run alongside PXC. However, you can migrate
to PXC from the environment that uses group replication.</p>
<p>For the strict mode to work correctly, make sure that the group replication
plugin is <em>not active</em>. In fact, if <a href="../wsrep-system-index.html#pxc_strict_mode"><code>pxc_strict_mode</code></a> is set to
ENFORCING or MASTER, the server will stop with an error:</p>
<p><strong>Error message with <a href="../wsrep-system-index.html#pxc_strict_mode"><code>pxc_strict_mode</code></a> set to <code>ENFORCING</code> or <code>MASTER</code></strong></p>
<details class="example">
<summary>The error message</summary>
<div class="no-copy highlight"><pre><span></span><code>Group replication cannot be used with PXC in strict mode.
</code></pre></div>
</details>
<p>If <code>pxc_strict_mode</code> is set to <code>DISABLED</code> you can use group
replication at your own risk. Setting <a href="../wsrep-system-index.html#pxc_strict_mode"><code>pxc_strict_mode</code></a> to
<code>PERMISSIVE</code> will result in a warning.</p>
<p><strong>Warning message with <code>pxc_strict_mode</code> set to <code>PERMISSIVE</code></strong></p>
<details class="example">
<summary>Warning message</summary>
<div class="no-copy highlight"><pre><span></span><code>Using group replication with PXC is only supported for migration. Please
make sure that group replication is turned off once all data is migrated to PXC.
</code></pre></div>
</details>
<h3 id="storage-engine">Storage engine<a class="headerlink" href="#storage-engine" title="Permanent link">&para;</a></h3>
<p>Percona XtraDB Cluster currently supports replication only for tables
that use a transactional storage engine (XtraDB or InnoDB).
To ensure data consistency,
the following statements should not be allowed for tables
that use a non-transactional storage engine (MyISAM, MEMORY, CSV, etc.):</p>
<ul>
<li>
<p>Data manipulation statements that perform writing to table
(for example, <code>INSERT</code>, <code>UPDATE</code>, <code>DELETE</code>, etc.)</p>
</li>
<li>
<p>The following administrative statements:
<code>CHECK</code>, <code>OPTIMIZE</code>, <code>REPAIR</code>, and <code>ANALYZE</code></p>
</li>
<li>
<p><code>TRUNCATE TABLE</code> and <code>ALTER TABLE</code></p>
</li>
</ul>
<p>Depending on the selected mode, the following happens:</p>
<p><code>DISABLED</code></p>
<p>At startup, no validation is performed.</p>
<p>At runtime, all operations are permitted.</p>
<p><code>PERMISSIVE</code></p>
<p>At startup, no validation is perfromed.</p>
<p>At runtime, all operations are permitted, but a warning is logged when an undesirable operation is performed on an unsupported table.</p>
<p><code>ENFORCING</code> or <code>MASTER</code></p>
<p>At startup, no validation is performed.</p>
<p>At runtime, any undesirable operation performed on an unsupported table is denied and an error is logged.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Unsupported tables can be converted to use a supported storage engine.</p>
</div>
<h3 id="myisam-replication">MyISAM replication<a class="headerlink" href="#myisam-replication" title="Permanent link">&para;</a></h3>
<p>Percona XtraDB Cluster provides support for replication of tables
that use the MyISAM storage engine. The use of the MyISAM storage engine
in a cluster is not recommended and if you use the storage engine, this is
your own risk.
Due to the non-transactional nature of MyISAM, the storage
engine is not fully-supported in Percona XtraDB Cluster.</p>
<p>MyISAM replication is controlled using the <code>wsrep_replicate_myisam</code> variable,
which is set to <code>OFF</code> by default.
Due to its unreliability, MyISAM replication should not be enabled
if you want to ensure data consistency.</p>
<p>Depending on the selected mode, the following happens:</p>
<p><code>DISABLED</code></p>
<p>At startup, no validation is performed.</p>
<p>At runtime, you can set <code>wsrep_replicate_myisam</code> to any value.</p>
<p><code>PERMISSIVE</code></p>
<p>At startup, if <code>wsrep_replicate_myisam</code> is set to <code>ON</code>, a warning is logged and startup continues.</p>
<p>At runtime, it is permitted to change <code>wsrep_replicate_myisam</code> to any value, but if you set it to <code>ON</code>, a warning is logged.</p>
<p><code>ENFORCING</code> or <code>MASTER</code></p>
<p>At startup, if <a href="../wsrep-system-index.html#wsrep_replicate_myisam"><code>wsrep_replicate_myisam</code></a> is set to <code>ON</code>, an error is logged and startup is aborted.</p>
<p>At runtime, any attempt to change <a href="../wsrep-system-index.html#wsrep_replicate_myisam"><code>wsrep_replicate_myisam</code></a> to <code>ON</code> fails and an error is logged.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a href="../wsrep-system-index.html#wsrep_replicate_myisam"><code>wsrep_replicate_myisam</code></a> variable controls <em>replication</em> for MyISAM tables, and this validation only checks whether it is allowed. Undesirable operations for MyISAM tables are restricted using the Storage engine validation.</p>
</div>
<h3 id="binary-log-format">Binary log format<a class="headerlink" href="#binary-log-format" title="Permanent link">&para;</a></h3>
<p>Percona XtraDB Cluster supports only the default row-based binary logging format.  In
8.0, setting the <a href="https://dev.mysql.com/doc/refman/8.0/en/replication-options-binary-log.html#sysvar_binlog_format">binlog_format</a> variable to anything but
<code>ROW</code> at startup or runtime is not allowed regardless of the value of the <code>pxc_strict_mode</code> variable.</p>
<h3 id="tables-without-primary-keys">Tables without primary keys<a class="headerlink" href="#tables-without-primary-keys" title="Permanent link">&para;</a></h3>
<p>Percona XtraDB Cluster cannot properly propagate certain write operations
to tables that do not have primary keys defined.
Undesirable operations include data manipulation statements
that perform writing to table (especially <code>DELETE</code>).</p>
<p>Depending on the selected mode, the following happens:</p>
<p><code>DISABLED</code></p>
<p>At startup, no validation is performed.</p>
<p>At runtime, all operations are permitted.</p>
<p><code>PERMISSIVE</code></p>
<p>At startup, no validation is perfromed.</p>
<p>At runtime, all operations are permitted,
but a warning is logged when an undesirable operation
is performed on a table without an explicit primary key defined.</p>
<p><code>ENFORCING</code> or <code>MASTER</code></p>
<p>At startup, no validation is performed.</p>
<p>At runtime, any undesirable operation
performed on a table without an explicit primary key
is denied and an error is logged.</p>
<h3 id="log-output">Log output<a class="headerlink" href="#log-output" title="Permanent link">&para;</a></h3>
<p>Percona XtraDB Cluster does not support tables in the MySQL database
as the destination for log output.
By default, log entries are written to file.
This validation checks the value of the <a href="https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html#sysvar_log_output">log_output</a> variable.</p>
<p>Depending on the selected mode, the following happens:</p>
<p><code>DISABLED</code></p>
<p>At startup, no validation is performed.</p>
<p>At runtime, you can set <code>log_output</code> to any value.</p>
<p><code>PERMISSIVE</code></p>
<p>At startup, if <code>log_output</code> is set only to <code>TABLE</code>,
a warning is logged and startup continues.</p>
<p>At runtime, it is permitted to change <code>log_output</code>
to any value, but if you set it only to <code>TABLE</code>,
a warning is logged.</p>
<p><code>ENFORCING</code> or <code>MASTER</code></p>
<p>At startup, if <code>log_output</code> is set only to <code>TABLE</code>,
an error is logged and startup is aborted.</p>
<p>At runtime, any attempt to change <code>log_output</code> only to <code>TABLE</code> fails
and an error is logged.</p>
<h3 id="explicit-table-locking">Explicit table locking<a class="headerlink" href="#explicit-table-locking" title="Permanent link">&para;</a></h3>
<p>Percona XtraDB Cluster provides only the tech-preview-level of support for explicit table locking operations,
The following undesirable operations lead to explicit table locking
and are covered by this validation:</p>
<ul>
<li>
<p><code>LOCK TABLES</code></p>
</li>
<li>
<p><code>GET_LOCK()</code> and <code>RELEASE_LOCK()</code></p>
</li>
<li>
<p><code>FLUSH TABLES &lt;tables&gt; WITH READ LOCK</code></p>
</li>
<li>
<p>Setting the <code>SERIALIZABLE</code> transaction level</p>
</li>
</ul>
<p>Depending on the selected mode, the following happens:</p>
<p><code>DISABLED</code> or <code>MASTER</code></p>
<p>At startup, no validation is performed.</p>
<p>At runtime, all operations are permitted.</p>
<p><code>PERMISSIVE</code></p>
<p>At startup, no validation is performed.</p>
<p>At runtime, all operations are permitted,
but a warning is logged when an undesirable operation is performed.</p>
<p><code>ENFORCING</code></p>
<p>At startup, no validation is performed.</p>
<p>At runtime, any undesirable operation is denied and an error is logged.</p>
<h3 id="auto-increment-lock-mode">Auto-increment lock mode<a class="headerlink" href="#auto-increment-lock-mode" title="Permanent link">&para;</a></h3>
<p>The lock mode for generating auto-increment values must be <em>interleaved</em>
to ensure that each node generates a unique (but non-sequential) identifier.</p>
<p>This validation checks the value of the <a href="https://dev.mysql.com/doc/refman/8.0/en/innodb-parameters.html#sysvar_innodb_autoinc_lock_mode">innodb_autoinc_lock_mode</a> variable.
By default, the variable is set to <code>1</code> (<em>consecutive</em> lock mode),
but it should be set to <code>2</code> (<em>interleaved</em> lock mode).</p>
<p>Depending on the strict mode selected,
the following happens:</p>
<p><code>DISABLED</code></p>
<p>At startup, no validation is performed.</p>
<p><code>PERMISSIVE</code></p>
<p>At startup, if <code>innodb_autoinc_lock_mode</code> is not set to <code>2</code>,
a warning is logged and startup continues.</p>
<p><code>ENFORCING</code> or <code>MASTER</code></p>
<p>At startup, if <code>innodb_autoinc_lock_mode</code> is not set to <code>2</code>, an error is logged and startup is aborted.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This validation is not performed during runtime, because the <code>innodb_autoinc_lock_mode</code> variable cannot be set dynamically.</p>
</div>
<h3 id="combine-schema-and-data-changes-in-a-single-statement">Combine schema and data changes in a single statement<a class="headerlink" href="#combine-schema-and-data-changes-in-a-single-statement" title="Permanent link">&para;</a></h3>
<p>With strict mode set to <code>ENFORCING</code>, Percona XtraDB Cluster does not support  statements, because they combine both schema and
data changes. Note that tables in the SELECT clause should be present on all
replication nodes.</p>
<p>With strict mode set to <code>PERMISSIVE</code> or <code>DISABLED</code>, CREATE TABLE  AS SELECT (CTAS) statements are
replicated using the  method to ensure
consistency. In Percona XtraDB Cluster 5.7, CREATE TABLE  AS SELECT (CTAS) statements were replicated using DML
write-sets when strict mode was set to <code>PERMISSIVE</code> or <code>DISABLED</code>.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>MyISAM tables are created and loaded even if <code>wsrep_replicate_myisam</code> equals to 1.  Percona XtraDB Cluster does not recommend using the MyISAM storage engine. The support for MyISAM may be removed in a future release.</p>
</div>
<div class="admonition admonition">
<p class="admonition-title">See also</p>
<p>MySQL Bug System: XID inconsistency on master-slave with CTAS https://bugs.mysql.com/bug.php?id=93948  </p>
</div>
<p>Depending on the strict mode selected, the following happens:</p>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td>DISABLED</td>
<td>At startup, no validation is performed. At runtime, all operations are permitted.</td>
</tr>
<tr>
<td>PERMISSIVE</td>
<td>At startup, no validation is perfromed. At runtime, all operations are permitted, but a warning is logged when a CREATE TABLE  AS SELECT (CTAS) operation is performed.</td>
</tr>
<tr>
<td>ENFORCING</td>
<td>At startup, no validation is performed. At runtime, any CTAS operation is denied and an error is logged.</td>
</tr>
</tbody>
</table>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Although CREATE TABLE &hellip; AS SELECT (CTAS) operations for temporary tables are permitted even in <code>STRICT</code> mode, temporary tables should not be used as <em>source</em> tables in CREATE TABLE &hellip; AS SELECT (CTAS) operations due to the fact that temporary tables are not present on all nodes.</p>
<p>If <code>node-1</code> has a temporary and a non-temporary table with the same name,
CREATE TABLE &hellip; AS SELECT (CTAS) on <code>node-1</code> will use temporary and CREATE TABLE &hellip; AS SELECT (CTAS) on <code>node-2</code> will use the non-temporary table resulting in a data level inconsistency.</p>
</div>
<h3 id="discard-and-import-tablespaces">Discard and import tablespaces<a class="headerlink" href="#discard-and-import-tablespaces" title="Permanent link">&para;</a></h3>
<p><code>DISCARD TABLESPACE</code> and <code>IMPORT TABLESPACE</code> are not replicated using TOI.
This can lead to data inconsistency if executed on only one node.</p>
<p>Depending on the strict mode selected, the following happens:</p>
<p><code>DISABLED</code></p>
<p>At startup, no validation is performed.</p>
<p>At runtime, all operations are permitted.</p>
<p><code>PERMISSIVE</code></p>
<p>At startup, no validation is perfromed.</p>
<p>At runtime, all operations are permitted, but a warning is logged when you discard or import a tablespace.</p>
<p><code>ENFORCING</code></p>
<p>At startup, no validation is performed.</p>
<p>At runtime, discarding or importing a tablespace is denied and an error is logged.</p>
<h3 id="major-version-check">Major version check<a class="headerlink" href="#major-version-check" title="Permanent link">&para;</a></h3>
<p>This validation checks that the protocol version is the same as the server major version. This validation protects the cluster against writes attempted on already upgraded nodes.</p>
<details class="example">
<summary>Expected output</summary>
<div class="highlight"><pre><span></span><code><span class="k">ERROR</span><span class="w"> </span><span class="mi">1105</span><span class="w"> </span><span class="p">(</span><span class="n">HY000</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="n">Percona</span><span class="o">-</span><span class="n">XtraDB</span><span class="o">-</span><span class="n">Cluster</span><span class="w"> </span><span class="n">prohibits</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="k">of</span><span class="w"> </span><span class="n">multiple</span><span class="w"> </span><span class="n">major</span><span class="w"> </span><span class="n">versions</span><span class="w"> </span><span class="k">while</span><span class="w"> </span><span class="n">accepting</span><span class="w"> </span><span class="k">write</span><span class="w"> </span><span class="n">workload</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="n">pxc_strict_mode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ENFORCING</span><span class="w"> </span><span class="k">or</span><span class="w"> </span><span class="k">MASTER</span>
</code></pre></div>
</details>

                
<div class="md-relbar2__inner md-grid">
<div class="md-content">
  <article class="md-content__inner md-typeset" role="main">    
    <h3>Contact us </h3>
    <p>For free technical help, visit the Percona <a class="reference external" href="https://forums.percona.com/c/mysql-mariadb/percona-xtradb-cluster-8-x/37" target="_blank">Community Forum</a>.<br>
      <p>To report bugs or submit feature requests, open a <a class="reference external" href="https://jira.percona.com/projects/PXC/issues" target="_blank">JIRA</a> ticket.<br>
       <p>For paid <a class="reference external" href="https://www.percona.com/services/support"> support </a> and <a class="reference external" href="https://www.percona.com/services/managed-services"> managed </a> or <a class="reference external" href="https://www.percona.com/services/consulting">consulting services </a>, contact <a class="reference external" href="https://www.percona.com/about-percona/contact" target="_blank">Percona Sales</a>.</p>
 </article>
</div>
</div>

                <!-- Last update of source file -->
                
                  
                    <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      2023-01-30
    
  </small>
</div>
                  
                
              
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
    <div class="md-copyright__highlight">
 <a href='https://percona.com' target='_blank'>Percona LLC and/or its affiliates, </a> &copy; 2023
    </div>
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            

  
    
  


  
    
  



  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="analytics" checked>
          <span class="task-list-indicator"></span>
          Google Analytics
        </label>
      </li>
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        </label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["search.highlight", "navigation.top", "content.tabs.link", "content.code.copy", "navigation.tracking", "content.action.edit", "content.action.view"], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
              
      <script src="../assets/javascripts/bundle.fc8c2696.min.js"></script>
      
        <script src="../js/version-select.js"></script>
      
        <script src="../js/promptremover.js"></script>
      
    

              <img src="https://tracking.g2crowd.com/attribution_tracking/conversions/1007137.gif?e=" width="1" height="1" />

              <noscript>
                <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K48FGP2" height="0" width="0" style="display:none;visibility:hidden"></iframe>
              </noscript>
              
  </body>
</html>